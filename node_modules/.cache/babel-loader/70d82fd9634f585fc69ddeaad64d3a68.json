{"ast":null,"code":"import { createSelector, createSlice } from '@reduxjs/toolkit';\nimport { useReducer } from 'react';\nimport { useSelector } from 'react-redux';\nimport { linksData } from '../fakeData';\nimport { toast } from 'react-toastify';\nconst storedLinks = JSON.parse(localStorage.getItem('Links'));\nexport const linkSlice = createSlice({\n  name: \"links\",\n  initialState: {\n    value: storedLinks ? storedLinks.value : linksData\n  },\n  reducers: {\n    addLink: (state, action) => {\n      try {\n        state.value.push(action.payload);\n        localStorage.setItem(\"Links\", JSON.stringify(state));\n        toast.success(action.payload.name + \" added.\");\n      } catch (e) {\n        toast.error(\"Something went wrong\");\n      }\n    },\n    deleteLink: (state, action) => {\n      try {\n        state.value = state.value.filter(link => link.id !== action.payload.id);\n        localStorage.setItem(\"Links\", JSON.stringify(state));\n        toast.success(action.payload.name + \" deleted.\");\n      } catch (e) {\n        toast.error(\"Something went wrong\");\n      }\n    },\n    updateVotes: (state, action) => {\n      state.value.map(link => {\n        if (link.id === action.payload.id) {\n          if (action.payload.buttonName === \"upvote\" && link.upvoted !== true) {\n            if (link.downvoted !== true) {\n              link.points = link.points + 1;\n              link.upvoted = true;\n              localStorage.setItem(\"Links\", JSON.stringify(state));\n            } else {\n              link.points = link.points + 2;\n              link.upvoted = true;\n              localStorage.setItem(\"Links\", JSON.stringify(state));\n            }\n          } else if (action.payload.buttonName === \"downvote\" && link.downvoted !== true) {\n            if (link.upvoted !== true) {\n              link.points = link.points + 1;\n              link.upvoted = true;\n              localStorage.setItem(\"Links\", JSON.stringify(state));\n            } else {\n              link.points = link.points + 2;\n              link.upvoted = true;\n              localStorage.setItem(\"Links\", JSON.stringify(state));\n            }\n          }\n        }\n      });\n    },\n    sortLinks: (state, action) => {\n      switch (action.payload.orderType) {\n        case 'mostLiked':\n          {\n            state.value = state.value.sort((a, b) => b.points - a.points || b.id - a.id);\n            break;\n          }\n\n        case 'leastLiked':\n          {\n            state.value = state.value.sort((a, b) => a.points - b.points || b.id - a.id);\n            break;\n          }\n\n        case 'byId':\n          {\n            state.value = state.value.sort((a, b) => b.id - a.id);\n          }\n\n        default:\n          {\n            state.value = state.value.sort((a, b) => b.id - a.id);\n          }\n      }\n\n      ;\n    }\n  }\n});\nexport const {\n  addLink\n} = linkSlice.actions;\nexport const {\n  deleteLink\n} = linkSlice.actions;\nexport const {\n  updateVotes\n} = linkSlice.actions;\nexport const {\n  sortLinks\n} = linkSlice.actions;\nexport default linkSlice.reducer;","map":{"version":3,"names":["createSelector","createSlice","useReducer","useSelector","linksData","toast","storedLinks","JSON","parse","localStorage","getItem","linkSlice","name","initialState","value","reducers","addLink","state","action","push","payload","setItem","stringify","success","e","error","deleteLink","filter","link","id","updateVotes","map","buttonName","upvoted","downvoted","points","sortLinks","orderType","sort","a","b","actions","reducer"],"sources":["C:/Users/berka/Desktop/React-Project/react-app/src/features/links.js"],"sourcesContent":["import {createSelector, createSlice} from '@reduxjs/toolkit'\r\nimport { useReducer } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {linksData} from '../fakeData';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst storedLinks = JSON.parse(localStorage.getItem('Links'));\r\n\r\nexport const linkSlice = createSlice({\r\n    name: \"links\",\r\n    initialState: {value: storedLinks ? storedLinks.value : linksData},\r\n    reducers: {\r\n        addLink: (state, action) => {\r\n            try {\r\n                state.value.push(action.payload);\r\n            localStorage.setItem(\"Links\", JSON.stringify(state));\r\n            toast.success(action.payload.name + \" added.\");\r\n            }\r\n            catch (e) {\r\n                toast.error(\"Something went wrong\");\r\n            }  \r\n        },\r\n\r\n        deleteLink: (state, action) => {\r\n            try {\r\n                state.value = state.value.filter((link) => link.id !== action.payload.id);\r\n                localStorage.setItem(\"Links\", JSON.stringify(state));\r\n                toast.success(action.payload.name + \" deleted.\");\r\n            }\r\n            catch (e) {\r\n                toast.error(\"Something went wrong\");\r\n            }\r\n        },\r\n\r\n        updateVotes: (state, action) => {\r\n            state.value.map((link) => {\r\n                if (link.id === action.payload.id){\r\n                    if((action.payload.buttonName === \"upvote\") && link.upvoted !== true){\r\n                        if(link.downvoted !== true) {\r\n                        link.points =  link.points + 1;\r\n                        link.upvoted = true;\r\n                        localStorage.setItem(\"Links\", JSON.stringify(state));\r\n                        }\r\n                        else {\r\n                            link.points =  link.points + 2;\r\n                        link.upvoted = true;\r\n                        localStorage.setItem(\"Links\", JSON.stringify(state)); \r\n                        }\r\n                    }\r\n                    else if((action.payload.buttonName === \"downvote\") && link.downvoted !== true){\r\n                        if(link.upvoted !== true) {\r\n                        link.points =  link.points + 1;\r\n                        link.upvoted = true;\r\n                        localStorage.setItem(\"Links\", JSON.stringify(state));\r\n                        }\r\n                        else {\r\n                        link.points =  link.points + 2;\r\n                        link.upvoted = true;\r\n                        localStorage.setItem(\"Links\", JSON.stringify(state)); \r\n                        }\r\n                    }                  \r\n                }\r\n            });\r\n        },\r\n\r\n        sortLinks: (state, action) => {\r\n            switch(action.payload.orderType){\r\n                case 'mostLiked': {\r\n                state.value = state.value.sort((a, b) => b.points - a.points || b.id - a.id);\r\n                break  \r\n                }\r\n                case 'leastLiked': {\r\n                state.value = state.value.sort((a, b) => a.points - b.points || b.id - a.id);\r\n                break  \r\n                }\r\n                case 'byId' : {\r\n                    state.value = state.value.sort((a, b) => b.id - a.id);\r\n                    }\r\n                default : {\r\n                state.value = state.value.sort((a, b) => b.id - a.id);\r\n                }\r\n            }; \r\n        }\r\n    }\r\n});\r\n\r\nexport const {addLink} = linkSlice.actions;\r\nexport const {deleteLink} = linkSlice.actions;\r\nexport const {updateVotes} = linkSlice.actions;\r\nexport const {sortLinks} = linkSlice.actions;\r\nexport default linkSlice.reducer;"],"mappings":"AAAA,SAAQA,cAAR,EAAwBC,WAAxB,QAA0C,kBAA1C;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAAQC,SAAR,QAAwB,aAAxB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,MAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAApB;AAEA,OAAO,MAAMC,SAAS,GAAGV,WAAW,CAAC;EACjCW,IAAI,EAAE,OAD2B;EAEjCC,YAAY,EAAE;IAACC,KAAK,EAAER,WAAW,GAAGA,WAAW,CAACQ,KAAf,GAAuBV;EAA1C,CAFmB;EAGjCW,QAAQ,EAAE;IACNC,OAAO,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACxB,IAAI;QACAD,KAAK,CAACH,KAAN,CAAYK,IAAZ,CAAiBD,MAAM,CAACE,OAAxB;QACJX,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8Bd,IAAI,CAACe,SAAL,CAAeL,KAAf,CAA9B;QACAZ,KAAK,CAACkB,OAAN,CAAcL,MAAM,CAACE,OAAP,CAAeR,IAAf,GAAsB,SAApC;MACC,CAJD,CAKA,OAAOY,CAAP,EAAU;QACNnB,KAAK,CAACoB,KAAN,CAAY,sBAAZ;MACH;IACJ,CAVK;IAYNC,UAAU,EAAE,CAACT,KAAD,EAAQC,MAAR,KAAmB;MAC3B,IAAI;QACAD,KAAK,CAACH,KAAN,GAAcG,KAAK,CAACH,KAAN,CAAYa,MAAZ,CAAoBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYX,MAAM,CAACE,OAAP,CAAeS,EAAxD,CAAd;QACApB,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8Bd,IAAI,CAACe,SAAL,CAAeL,KAAf,CAA9B;QACAZ,KAAK,CAACkB,OAAN,CAAcL,MAAM,CAACE,OAAP,CAAeR,IAAf,GAAsB,WAApC;MACH,CAJD,CAKA,OAAOY,CAAP,EAAU;QACNnB,KAAK,CAACoB,KAAN,CAAY,sBAAZ;MACH;IACJ,CArBK;IAuBNK,WAAW,EAAE,CAACb,KAAD,EAAQC,MAAR,KAAmB;MAC5BD,KAAK,CAACH,KAAN,CAAYiB,GAAZ,CAAiBH,IAAD,IAAU;QACtB,IAAIA,IAAI,CAACC,EAAL,KAAYX,MAAM,CAACE,OAAP,CAAeS,EAA/B,EAAkC;UAC9B,IAAIX,MAAM,CAACE,OAAP,CAAeY,UAAf,KAA8B,QAA/B,IAA4CJ,IAAI,CAACK,OAAL,KAAiB,IAAhE,EAAqE;YACjE,IAAGL,IAAI,CAACM,SAAL,KAAmB,IAAtB,EAA4B;cAC5BN,IAAI,CAACO,MAAL,GAAeP,IAAI,CAACO,MAAL,GAAc,CAA7B;cACAP,IAAI,CAACK,OAAL,GAAe,IAAf;cACAxB,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8Bd,IAAI,CAACe,SAAL,CAAeL,KAAf,CAA9B;YACC,CAJD,MAKK;cACDW,IAAI,CAACO,MAAL,GAAeP,IAAI,CAACO,MAAL,GAAc,CAA7B;cACJP,IAAI,CAACK,OAAL,GAAe,IAAf;cACAxB,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8Bd,IAAI,CAACe,SAAL,CAAeL,KAAf,CAA9B;YACC;UACJ,CAXD,MAYK,IAAIC,MAAM,CAACE,OAAP,CAAeY,UAAf,KAA8B,UAA/B,IAA8CJ,IAAI,CAACM,SAAL,KAAmB,IAApE,EAAyE;YAC1E,IAAGN,IAAI,CAACK,OAAL,KAAiB,IAApB,EAA0B;cAC1BL,IAAI,CAACO,MAAL,GAAeP,IAAI,CAACO,MAAL,GAAc,CAA7B;cACAP,IAAI,CAACK,OAAL,GAAe,IAAf;cACAxB,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8Bd,IAAI,CAACe,SAAL,CAAeL,KAAf,CAA9B;YACC,CAJD,MAKK;cACLW,IAAI,CAACO,MAAL,GAAeP,IAAI,CAACO,MAAL,GAAc,CAA7B;cACAP,IAAI,CAACK,OAAL,GAAe,IAAf;cACAxB,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8Bd,IAAI,CAACe,SAAL,CAAeL,KAAf,CAA9B;YACC;UACJ;QACJ;MACJ,CA3BD;IA4BH,CApDK;IAsDNmB,SAAS,EAAE,CAACnB,KAAD,EAAQC,MAAR,KAAmB;MAC1B,QAAOA,MAAM,CAACE,OAAP,CAAeiB,SAAtB;QACI,KAAK,WAAL;UAAkB;YAClBpB,KAAK,CAACH,KAAN,GAAcG,KAAK,CAACH,KAAN,CAAYwB,IAAZ,CAAiB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACL,MAAF,GAAWI,CAAC,CAACJ,MAAb,IAAuBK,CAAC,CAACX,EAAF,GAAOU,CAAC,CAACV,EAA3D,CAAd;YACA;UACC;;QACD,KAAK,YAAL;UAAmB;YACnBZ,KAAK,CAACH,KAAN,GAAcG,KAAK,CAACH,KAAN,CAAYwB,IAAZ,CAAiB,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACJ,MAAF,GAAWK,CAAC,CAACL,MAAb,IAAuBK,CAAC,CAACX,EAAF,GAAOU,CAAC,CAACV,EAA3D,CAAd;YACA;UACC;;QACD,KAAK,MAAL;UAAc;YACVZ,KAAK,CAACH,KAAN,GAAcG,KAAK,CAACH,KAAN,CAAYwB,IAAZ,CAAiB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACX,EAAF,GAAOU,CAAC,CAACV,EAApC,CAAd;UACC;;QACL;UAAU;YACVZ,KAAK,CAACH,KAAN,GAAcG,KAAK,CAACH,KAAN,CAAYwB,IAAZ,CAAiB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACX,EAAF,GAAOU,CAAC,CAACV,EAApC,CAAd;UACC;MAdL;;MAeC;IACJ;EAvEK;AAHuB,CAAD,CAA7B;AA8EP,OAAO,MAAM;EAACb;AAAD,IAAYL,SAAS,CAAC8B,OAA5B;AACP,OAAO,MAAM;EAACf;AAAD,IAAef,SAAS,CAAC8B,OAA/B;AACP,OAAO,MAAM;EAACX;AAAD,IAAgBnB,SAAS,CAAC8B,OAAhC;AACP,OAAO,MAAM;EAACL;AAAD,IAAczB,SAAS,CAAC8B,OAA9B;AACP,eAAe9B,SAAS,CAAC+B,OAAzB"},"metadata":{},"sourceType":"module"}